---
title: 'Group 3 - Chapter 9: Support Vector Machines Tutorial'
author:
- Jolien Lam (j.c.lam@amc.uva.nl) â€“ University of Amsterdam - jolienlam
- Yeng Moua (moua0199@umn.edu) â€“ University of Minnesota -
- Fortuna Vuthaj (fortuna.vuthaj@gmail.com) â€“ University of Heilbronn/Heidelberg
  -
output:
  html_document:
    df_print: paged
---

```{r setup, include= FALSE}


`%!in%` = Negate(`%in%`)
```

```{r loading_libraries}
library(dplyr)
```

This notebook documents work by group 3 utilizing support vector machines in the analysis of health data. Informaiton about the project can be found [here](https://iphie2018.wordpress.com/academic-program/).

# Front Matter

# Extraction

Data were acquired from ....

Two files are retrievable. One of the aggregate patient data, and one of mappings to descriptions of numeric values.

This later file was manually transformed into a long version for reading into our analysis environment.

```{r load_data}
PatientData <- read.csv("./Data/diabetic_data.csv", na.strings = "?")

Mappings <- read.csv("./Data/IDs_mapping_long.csv")

```

# Implimenting Exclusions and Variable Removals

We initially decided to match our data to that of the original researchers. The researchers excluded the variables "weight" and "payer code" due to missingness and, in the case of payer code, an expectation of no association. They kept "meedical specialty" but created an indicator of "missing" to account for ht ehigh proportion (47%) of missing values. Additionally, only the first visit (defined by the lowest encounter id per patient) was kept, patients discharged as deceased or to hospice were excluded. The researchers reported 69984 observations after all exlcusion, but the public data set contained 101766. The below code attempts to match the researcher's count.

## Removing Weight and and payer Code Variables

```{r remove_unused_variables}
PatientData$weight <- NULL
PatientData$payer_code <- NULL
```

## Excluding Hospice and Expired Patients

```{r excuding_hospice_expired}
#Excluding Dispositions of Hospice and Expired
PatientData <- PatientData[PatientData$discharge_disposition_id %!in% c(13,14,11,20,21),]
```

Discharge of hospice (discharge ids 13 and 14) and Deceased (discharge ids 11, 20, 21) were excluded from our data, leaving `r nrow(PatientData)`

## Excluding Visits Beyond the First

```{r}
PatientData <- PatientData %>% group_by(patient_nbr) %>% filter(row_number(encounter_id) == 1)
```




